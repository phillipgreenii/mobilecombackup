{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": [
    "ast-grep@latest",
    "deno@2",
    "go@1.24",
    "gopls@latest",
    "golangci-lint@latest",
    "gotestsum@latest",
    "jq@latest",
    "viu@latest",
    "yq@latest",
    "claude-code@1.0.72",
    "uv@latest"
  ],
  "shell": {
    "init_hook": [
      "go mod tidy",
      "echo 'ðŸ“‹ Setting up development environment...'",
      "if [ -f scripts/install-hooks.sh ]; then bash scripts/install-hooks.sh; fi",
      "# Load project-specific Neovim config if it exists",
      "export NVIM_PROJECT_CONFIG=$PWD/.config/nvim",
      "if [ -d \"$NVIM_PROJECT_CONFIG\" ]; then",
      "  export XDG_CONFIG_HOME_NVIM=$PWD/.config",
      "  alias vim='nvim -u $NVIM_PROJECT_CONFIG/init.lua'",
      "  alias nvim='nvim -u $NVIM_PROJECT_CONFIG/init.lua'",
      "  echo 'ðŸ”§ Project-specific Neovim configuration loaded'",
      "fi"
    ],
    "scripts": {
      "list-issues": [
        "ls -1 issues/{active,ready,backlog}"
      ],
      "formatter": [
        "go fmt ./..."
      ],
      "builder": [
        "go build -v ./..."
      ],
      "tests": [
        "gotestsum --format testname -- -covermode=set ./..."
      ],
      "test-unit": [
        "gotestsum --format testname -- -short ./..."
      ],
      "test-integration": [
        "gotestsum --format testname -- -run Integration ./..."
      ],
      "linter": [
        "golangci-lint run"
      ],
      "linter-fix": [
        "golangci-lint run --fix"
      ],
      "build-cli": [
        "sh -c 'VERSION=$(bash scripts/build-version.sh) && go build -ldflags \"-X main.Version=$VERSION\" -o mobilecombackup github.com/phillipgreen/mobilecombackup/cmd/mobilecombackup'"
      ],
      "validate-version": [
        "bash scripts/validate-version.sh"
      ],
      "ci": [
        "devbox run formatter",
        "devbox run tests",
        "devbox run linter",
        "devbox run build-cli"
      ],
      "install-hooks": [
        "bash scripts/install-hooks.sh"
      ],
      "test-hooks": [
        "echo 'ðŸ§ª Testing pre-commit hooks...'",
        ".githooks/pre-commit"
      ],
      "coverage": [
        "echo 'ðŸ“Š Running test coverage analysis...'",
        "gotestsum --format testname -- -coverprofile=coverage.out ./...",
        "go tool cover -html=coverage.out -o coverage.html",
        "echo 'âœ… Coverage report generated: coverage.html'"
      ],
      "coverage-summary": [
        "echo 'ðŸ“ˆ Test Coverage Summary:'",
        "gotestsum --format testname -- -cover ./..."
      ],
      "ccusage": [
	      "deno run   -E   -R=$HOME/.claude/ -R=$HOME/.config/claude/ -R=/tmp   -S=homedir   -N='raw.githubusercontent.com:443'   npm:ccusage@latest blocks --live"
      ]
    }
  }
}
